#!/usr/bin/env bash
echo "ğŸš¨ğŸš¨ PRE-COMMIT HOOK RUNNING ğŸš¨ğŸš¨"
# Run Flutter analyze and check for errors
echo "â†’ ğŸ‘€ğŸ” Running Flutter analyze"
if ! output=$(flutter analyze); then
    echo "â†’ ğŸ¤”ğŸ˜­ğŸ¤¬ Found the following errors:"
    echo "$output"
    exit 1
fi
# Run Flutter Test and check for errors
echo "â†’ ğŸ‘€ğŸ” Running Flutter Test"
if ! output=$(flutter test); then
    echo "â†’ ğŸ¤”ğŸ˜­ğŸ¤¬ Found the following errors:"
    echo "$output"
    exit 1
fi
# If we made it this far, the commit is allowed
echo "â†’ ğŸ‰ğŸ¥³â¤ï¸âœ… No errors found!"
exit 0